# @package _global_
experiment: microtubules

evaluate:
  key: image/deconv

dataset:
  _target_: noise2same.dataset.MicrotubulesDataset
  path: ${cwd}/data/microtubules-simulation/
  input_name: ground-truth.tif
  n_dim: 3
  n_channels: 1
  tile_size: 64
  tile_step: 48
  add_blur_and_noise: True
  transforms:
    _target_: noise2same.dataset.util.training_augmentations_3d
  input_size: ${.tile_size}  # needed for some models

dataset_test:
  _target_: noise2same.dataset.MicrotubulesTestDataset
  path: ${cwd}/data/microtubules-simulation/
  input_name: ground-truth.tif
  n_dim: 3
  n_channels: 1
  add_blur_and_noise: True

factory_test:
  _target_: noise2same.dataset.TiledImageFactory
  tile_size: 128
  tile_step: 96
  crop_border: 8
  weight: 'pyramid'
  batch_size: 8

backbone:
  base_channels: 48
  skip_method: add

training:
  steps_per_epoch: 100
  steps: 15000
  crop: 64
  batch_size: 4
  validate: False
  monitor: rec_mse

scheduler:
  decay_steps: 2000

psf:
  _target_: noise2same.psf.psf_convolution.PSFParameter
  pad_mode: replicate
  fft: auto
  in_channels: ${dataset.n_channels}

denoiser:
  lambda_bound: 0.1